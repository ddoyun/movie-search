async function e(e,t,o){const s=await fetch(`https://omdbapi.com/?apikey=7035c60c&s=${e}&y=${t}&page=${o}`),{Search:n,totalResults:c}=await s.json();return{movies:n,total:c}}function t(e,t,c){const l=Number(e.total);if(o.classList.add("show"),n.classList.remove("show"),s.hasChildNodes()&&!e.movies)return!1,o.classList.remove("show"),n.classList.remove("show"),console.log("마지막 페이지"),!1;if(!e.movies)return!1,o.classList.remove("show"),n.classList.remove("show"),alert("검색된 영화가 없습니다."),!1;for(const t of e.movies){const e=document.createElement("div"),o=document.createElement("h1"),n=document.createElement("img");e.classList.add("movie"),e.append(o,n),o.textContent=t.Title,o.addEventListener("click",(()=>{console.log(t.Title)})),n.src=t.Poster,console.log(n.src),"N/A"===n.src&&(console.log(n.src),n.src="./noImage.png"),s.append(e)}o.classList.remove("show"),l/10<=t?n.classList.remove("show"):n.classList.add("show")}const o=document.querySelector(".loading"),s=document.querySelector(".movies"),n=document.querySelector(".more"),c=document.querySelector(".search-btn"),l=document.querySelector(".movies-years"),r=document.querySelector(".movies-count"),a=(new Date).getFullYear();let i="",u=1,m=!1;for(let e=a;e>a-38;e--){const t=document.createElement("option");t.value=e,t.textContent=e,l.append(t)}async function d(){let o=l.value;u+=1;const s=await e(i,o,u);Number(s.total)/10<=u&&(m=!1),t(s,u)}document.querySelector("input").addEventListener("input",(e=>{i=e.target.value})),c.addEventListener("click",(async()=>{if(m=!0,""===i)alert("제목을 입력해 주세요"),s.innerHTML="";else{let o=l.value;u=1;const n=await e(i,o,u);s.innerHTML="",t(n,u);let c=r.value;for(let e=1;e<c;e++)d()}})),n.addEventListener("click",(async()=>{let e=r.value;for(let t=1;t<=e;t++)d()}));const v=new IntersectionObserver(((e,t)=>{const o=e[0].target;if(console.log(m),e[0].isIntersecting&&m){console.log("현재 보이는 타켓",o);let e=r.value;for(let t=1;t<=e;t++)d();v.observe(n)}}),{threshold:1});v.observe(n);
//# sourceMappingURL=index.b94a05e7.js.map
