async function e(e,t,o){const s=await fetch(`https://omdbapi.com/?apikey=7035c60c&s=${e}&y=${t}&page=${o}`),{Search:n,totalResults:c}=await s.json();return{movies:n,total:c}}function t(e,t,c){const l=Number(e.total);if(o.classList.add("show"),n.classList.remove("show"),s.hasChildNodes()&&!e.movies)return!1,o.classList.remove("show"),n.classList.remove("show"),console.log("마지막 페이지"),!1;if(!e.movies)return!1,o.classList.remove("show"),n.classList.remove("show"),alert("검색된 영화가 없습니다."),!1;for(const t of e.movies){const e=document.createElement("div"),o=document.createElement("h1"),n=document.createElement("img");e.classList.add("movie"),e.append(o,n),o.textContent=t.Title,o.addEventListener("click",(()=>{console.log(t.Title)})),n.src=t.Poster,"N/A"===n.src&&(console.log("이미지 음슴"),n.src="../images/noImage.png"),s.append(e)}o.classList.remove("show"),l/10<=t?n.classList.remove("show"):n.classList.add("show")}const o=document.querySelector(".loading"),s=document.querySelector(".movies"),n=document.querySelector(".more"),c=document.querySelector(".search-btn"),l=document.querySelector(".movies-years"),r=document.querySelector(".movies-count"),a=(new Date).getFullYear(),i=document.querySelector(".endList");let u="",m=1,d=!1;for(let e=a;e>a-38;e--){const t=document.createElement("option");t.value=e,t.textContent=e,l.append(t)}async function v(){let o=l.value;m+=1;const s=await e(u,o,m);Number(s.total)/10<=m&&(d=!1),t(s,m)}document.querySelector("input").addEventListener("input",(e=>{u=e.target.value})),c.addEventListener("click",(async()=>{if(d=!0,""===u)alert("제목을 입력해 주세요"),s.innerHTML="";else{let o=l.value;m=1;const n=await e(u,o,m);s.innerHTML="",t(n,m);let c=r.value;for(let e=1;e<c;e++)v()}})),n.addEventListener("click",(async()=>{let e=r.value;for(let t=1;t<=e;t++)v()}));const h=new IntersectionObserver(((e,t)=>{const o=e[0].target;if(console.log(d),e[0].isIntersecting&&d){console.log("현재 보이는 타켓",o);let e=r.value;for(let t=1;t<=e;t++)v();h.observe(i)}}),{threshold:1});h.observe(i);
//# sourceMappingURL=index.d269e281.js.map
